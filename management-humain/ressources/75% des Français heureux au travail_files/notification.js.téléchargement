var ultimediaNotification=function(){var q=new Array();var s=(window.location.protocol=="https:"?"https":"http")+"://www.ultimedia.com";var v=null;var n=this;var i={position:"fixed",borderRadius:"4px",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",font:"bold 12px arial",lineHeight:"12px",padding:"5px 20px 5px 5px",margin:"0",display:"none",opacity:"0",zIndex:"999"};var m={position:"absolute",top:"5px",right:"5px",background:"transparent url("+s+"/img/widget/close.png) no-repeat center center",padding:"3px",margin:"0",cursor:"pointer",borderRadius:"3px",border:"1px solid #fff",width:"10px",height:"10px",boxSizing:"content-box"};var f={color:"#fff",font:"bold 12px/13px arial",display:"inline-block",maxWidth:"115px",margin:"0 10px",cursor:"pointer",letterSpacing:"normal",textTransform:"none"};var y={border:"1px solid #fff",width:"69px",height:"52px",verticalAlign:"top",display:"inline-block",cursor:"pointer",position:"relative"};var j={border:"0 none",margin:"0",padding:"0",width:"67px",height:"50px"};var t={position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"transparent url("+s+"/img/central/icon/layer.svg) no-repeat center center",zIndex:"10"};var d={opacity:1,WebkitTransition:"opacity 0.5s ease-in-out",MozTransition:"opacity 0.5s ease-in-out",MsTransition:"opacity 0.5s ease-in-out",OTransition:"opacity 0.5s ease-in-out",transition:"opacity 0.5s ease-in-out"};var u={opacity:0,WebkitTransition:"opacity 0.5s ease-in-out",MozTransition:"opacity 0.5s ease-in-out",MsTransition:"opacity 0.5s ease-in-out",OTransition:"opacity 0.5s ease-in-out",transition:"opacity 0.5s ease-in-out"};var r=document.createElement("span");r.className="um_title_notif";var k=document.createElement("div");var B=document.createElement("img");var z=document.createElement("div");z.className="um_picto_notif";var e=document.createElement("div");e.className="um_notif";var D=4;var l=5;var C=5;var b=350;var h=2;function c(){var E=new Array();while(q.length>0){E.push(q.shift())}return E}this.addItem=function(E){q.push(E)};this.createNotif=function(F,J,L,E,M,H,G,I){v=F;D=J;b=G;I=I;var K=document.createElement("div");K.className="um_close_notif";o(k,y);o(B,j);o(z,t);o(r,f);o(K,m);o(e,i);switch(J){case 1:o(e,{bottom:E+"px",right:M+"px"});l=E;C=M;break;case 2:o(e,{top:L+"px",right:M+"px"});l=L;C=M;break;case 3:o(e,{top:L+"px",left:H+"px"});l=L;C=H;break;case 4:o(e,{bottom:E+"px",left:H+"px"});l=E;C=H;break;default:o(e,{bottom:E+"px",left:H+"px"});break}k.appendChild(B);k.appendChild(z);e.appendChild(k);e.appendChild(r);e.appendChild(K);document.body.appendChild(e);var N=c();if(N.length>0){this.reloadNotif(N);p()}};this.reloadNotif=function(E){for(var F=0;F<E.length;F++){e.setAttribute("data-target",E[F].target);if(E[F].title.length>65){r.innerHTML=E[F].title.substr(0,65)+"..."}else{r.innerHTML=E[F].title}B.setAttribute("src",E[F].imgSrc)}};function o(E,F){Object.keys(F).forEach(function(G){E.style[G]=F[G]})}function p(){e.style.display="block";o(e,d)}function w(){var E=document.querySelector("div.um_notif");o(E,u)}function x(){w();if(v=="iframe"){a(D,l,C,b,h)}else{var E=function(){if("undefined"!=typeof v){ultimediaVisiblePlayer.addCss(D,l,C,b,h);ultimediaVisiblePlayer.initWidget(v,1);v._jw.play(true);ultimediaVisiblePlayer.scrollVisiblePlayer()}else{setTimeout(E,100)}};E()}}function g(E){if(typeof E!="undefined"&&typeof E.data=="object"&&E.data.hasOwnProperty("target")){switch(E.data.action){case"create_notification":n.createNotif(E.data.target,E.data.position,E.data.top,E.data.bottom,E.data.right,E.data.left,E.data.width,E.data.display_mobile);break}}}function a(K,J,I,F,H){var G=document.querySelectorAll("iframe");for(var E=0;E<G.length;E++){G[E].contentWindow.postMessage({action:"launch_visible_from_notif",position:K,top_bottom:J,right_left:I,width:F,display_mobile:H},"*")}}function A(E){if(!(E.target.hasAttribute)||!E.target.hasAttribute("class")){return false}if(E.target.getAttribute("class").split(" ").indexOf("um_close_notif")!=-1){w();E.stopPropagation();return}if((E.target.getAttribute("class").split(" ").indexOf("um_notif")!=-1)||(E.target.getAttribute("class").split(" ").indexOf("um_picto_notif")!=-1)||(E.target.getAttribute("class").split(" ").indexOf("um_title_notif")!=-1)){x();E.stopPropagation();return}}if(document.addEventListener){document.addEventListener("click",A,false)}else{if(document.attachEvent){document.attachEvent("onclick",A)}}if(window.addEventListener){window.addEventListener("message",g,false)}else{window.attachEvent("onmessage",g)}};ultimediaNotification=new ultimediaNotification();