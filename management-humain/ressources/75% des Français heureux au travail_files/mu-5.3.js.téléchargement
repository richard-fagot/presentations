/*! mu-5.3 04-08-2017 16:46:50 */
var eStatTag=function(a){"use strict";function b(a){R&&(console.debug?console.debug("eStat - "+a):console.log&&console.log("eStat - "+a))}function c(a){console.error?console.error("eStat - "+a):console.log&&console.log("eStat - "+a)}function d(){var a=null;if(U)a=new window.XDomainRequest;else for(var b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++)try{a=b[c]();break}catch(d){}return a}function e(a){if(!a)return c(P.noInit),Q=!1,!1;if(a.hasOwnProperty("serial")&&a.serial||(c(P.noSerial),Q=!1),(!a.hasOwnProperty("measure")||"page"!==a.measure&&"streaming"!==a.measure)&&(c(P.noMeasure),Q=!1),R=a.hasOwnProperty("debug")&&("true"===a.debug||a.debug===!0),"streaming"===a.measure){if(a.hasOwnProperty("streaming")){var d={};d.live=1,d.replay=1,d.timeshifting=1,a.streaming.hasOwnProperty("diffusion")&&d.hasOwnProperty(a.streaming.diffusion)||(c(P.noDiffusionType),Q=!1),a.streaming.hasOwnProperty("playerName")&&a.streaming.playerName||(c(P.noPlayerName),Q=!1),"replay"===a.streaming.diffusion&&(a.streaming.hasOwnProperty("callbackPosition")&&a.streaming.callbackPosition||(c(P.noCallBack),Q=!1)),a.hasOwnProperty("implementation")&&"automatic"===a.implementation&&"replay"!==a.streaming.diffusion&&(b(P.automaticModeImpossible),Q=!1)}else c(P.noStreamInfo),Q=!1;a.hasOwnProperty("criteria")&&(c(P.streamingAndCriteria),Q=!1),a.hasOwnProperty("segments")&&(c(P.streamingAndSegments),Q=!1)}return Q}function f(){"denied"!==V.streaming.access&&(Q=!0);var a=[];a.live=1,a.replay=1,a.timeshifting=1,V.streaming.diffusion&&a[V.streaming.diffusion]||(c(P.noDiffusionType),Q=!1),V.streaming.playerName||(c(P.noPlayerName),Q=!1),V.streaming.streamName||(c(P.noStreamName),Q=!1),"replay"!==V.streaming.diffusion||V.streaming.wasTimeshifting||V.streaming.callbackPosition||(c(P.noCallBack),Q=!1)}function g(){var a="";return V.domain&&!V.domain.match("&"+T.domain+"=")?"&"+T.domain+"="+o(V.domain):(a="frame"===V.implementation?h():document.domain,a?"&"+T.domain+"="+o(a):a)}function h(){var a="",b=(window.location!==window.parent.location?document.referrer:document.location).toString();if(b=b.replace(/^https?:\/\//,"").split("/"),b[0].match(/:/g)){var c=b[0].split(":");a=c[0]}else a=b[0];return a}function i(){var a="",b=document.referrer;return"redirection"===V.implementation&&(b=j()),"frame"===V.implementation&&(b=h()),b&&(a="&r="+o(b)),a}function j(){for(var a="",b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].split("=");if("cks"===d[0]&&"-1"!==d[1])return a=b[c].substring(4),document.cookie="cks=-1;",a}return k()}function k(){var a="",b=document.URL;return b.match(/__cks_=/g)&&(a=b.match(/__cks_=([^&]+)/g)[0].split("=")[1]),a?a:(V.implementation="",i())}function l(){var a="",b=!0,c=["domain","measure"];if(a+=n("levels"),"streaming"===V.measure){c.push("page");for(var d=["cmsPS","cmsPO","cmsOP","cmsMV","cmsEV"],e=0;e<d.length;e++)a+="&"+d[e]+"="+V.streaming[d[e]]}else c.push("streaming"),c.push("page"),a+=n("segments"),a+=n("criteria");for(var f in T)if("exclude"!==T[f]){for(var g=0;g<c.length;g++)c[g]===f&&(b=!1);b&&(a+=n(f)),b=!0}return a}function m(){if(!Q)return"";var a="",b="-yahoo";return b="",a+=V.serial+"?v="+W+"&tn=JS"+b+l()+"&sch="+Y+"&scw="+Z+"&scp="+aa+"&vh="+$+"&vw="+_+"&enc="+ca+"&n="+Math.round(1e9*Math.random())+V.domain+V.referer,"undefined"!=typeof ma&&(a+=ma),a}function n(a){if(!(a in V))return"";var b="",c="",d="";if("string"==typeof T[a])c=T[a],b+="&"+c+"="+o(V[a]);else{"undefined"==typeof T[a]?c=T[V.measure][a]:"object"==typeof T[a]&&(c=T[a]);for(d in c)V[a][d]&&"exclude"!==c[d]&&(b+="&"+c[d]+"="+o(V[a][d]))}return b}function o(a){var c="";if(a){var d=encodeURIComponent(a).length;d>256&&b(P.max256+" "+a.substring(0,20)),c=encodeURIComponent(a).substring(0,256)}return c}function p(a){if(a){if(ka||"page"===V.measure){"undefined"!=typeof V.measureNodesURL?a=V.measureNodesURL+a:"page"===V.measure?a=fa+a:"streaming"===V.measure&&(a=ea+a),"streaming"===V.measure&&(ja++,a=a+"&cmsVI="+V.streaming.cmsVI+"&cmsRK="+ja,12===V.streaming.cmsPS&&(ja=0,ka=!1),"restricted"===V.streaming.access&&(Q=!1,ia.stop(),b(P.accesRestricted)));var c=document.createElement("img"),d=a.split("&"),e=d[0].split("?");d.push(e[1]),d.splice(0,1);var f=e[0];d.sort();for(var g="?",h=0;h<d.length;h++)f+=g+d[h],g="&";c.src=f,b(P.requestSend+a),"streaming"===V.measure&&(V.streaming.cmsOP=V.streaming.cmsPO)}else setTimeout(function(){p(a)},500);return!0}}function q(a){return 12===V.streaming.cmsPS?(p(a),void(la=null)):(la||(p(a),window.setTimeout(function(){r()},1e3),la=[],la.firstPS=V.streaming.cmsPS),la.cmsPS=V.streaming.cmsPS,la.cmsPO=V.streaming.cmsPO,la.cmsOP=V.streaming.cmsOP,void(la.cmsVI=V.streaming.cmsVI))}function r(){if(la&&la.firstPS!==la.cmsPS){V.streaming.cmsEV="state",V.streaming.cmsPS=la.cmsPS,V.streaming.cmsPO=la.cmsPO,V.streaming.cmsOP=la.cmsOP,V.streaming.cmsVI=la.cmsVI;var a=m();p(a)}la=null}function s(){V.streaming.cmsMV=X,isNaN(V.streaming.cmsPO)&&(V.streaming.cmsPO=0),V.streaming.cmsOP=V.streaming.cmsPO,ha!==[]&&ia.stop(),ia.launch()}function t(){V.streaming.cmsVI=Math.floor(1e17*Math.random()%0x8db076000000000),V.streaming.access="full",ea=da,E(),"automatic"===V.implementation&&(b(P.automaticModeActivated),w())}function u(){var a=V.streaming.am_TS_cb;V.streaming.am_TS_cb=(new Date).getTime();var b=1,c=0,d=.9;V.streaming.am_newPosition=y(),0!==a&&(c=V.streaming.am_newPosition-V.streaming.am_oldPosition,b=(V.streaming.am_TS_cb-a)/1e3),1==V.streaming.am_isPlaying?c>b+d||0>c?(O("pause",Math.round(V.streaming.am_oldPosition)),O("play",z())):0===c&&(O("pause",z()),V.streaming.am_isPlaying=0):c>0&&b+d>=c&&(O("play",Math.round(V.streaming.am_oldPosition)),V.streaming.am_isPlaying=1),V.streaming.am_oldPosition=V.streaming.am_newPosition}function v(){delete V.streaming.am_isPlaying,delete V.streaming.am_newPosition,delete V.streaming.am_oldPosition,delete V.streaming.am_TS_cb,clearInterval(V.streaming.am_cb),delete V.streaming.am_cb,w()}function w(){V.streaming.am_cb||(V.streaming.am_oldPosition=0,V.streaming.am_newPosition=0,V.streaming.am_isPlaying=-1,V.streaming.am_TS_cb=0,V.streaming.am_cb=setInterval(u,1e3))}function x(){ia.stop(),V.streaming.cmsPS=12,q(m()),V.streaming.cmsVI=0,V.streaming.cmsPO=0,V.streaming.cmsOP=0}function y(){var a="0";if("replay"===V.streaming.diffusion&&!V.streaming.wasTimeshifting){if(a=V.streaming.callbackPosition(V.streaming.playerObj),!isNaN(a))return a;b(P.positionFail+a)}return a}function z(){return Math.round(y())}function A(){V.streaming.cmsEV="polling",V.streaming.cmsPO=z(),la&&(V.streaming.cmsPS=la.firstPS),p(m())}function B(a){ja||(V.streaming.access=a[0].split("=")[1]||a[0],ea=a[1].split("=")[1]||a[1],"denied"===V.streaming.access?(Q=!1,c(P.accesDenied)):(a[2].split("=")[1]?V.streaming.cmsVI=a[2].split("=")[1].replace(/\"/g,""):V.streaming.cmsVI=a[2],ka=!0))}function C(){V.streaming.access="denied",Q=!1,c(P.accesDenied)}function D(){200===S.status?B(S.responseText.split("|")):401===S.status&&C()}function E(){setTimeout(function(){ka=!0},2e3),ga="undefined"!=typeof V.authURL?V.authURL:ba+"auth.estat.com/";var a=ga+V.serial;if(S)U?(S.onload=D,S.open("GET",a,!0),S.send()):(S.onreadystatechange=function(){4===S.readyState&&D()},S.open("GET",a,!0),S.send());else{var b=function(){var a=[eS_access,eS_host,cmsVI];B(a)},c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src=a+".js";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d),c.addEventListener?c.addEventListener("load",function(){b()},!1):c.onreadystatechange=function(){c.readyState in{complete:1,loaded:1}&&b()}}}function F(a){var b="";try{b=new window.ActiveXObject(a)}catch(c){}return b}function G(a){var b=F(a);return b?a:""}function H(){return screen.width+"x"+screen.height+"x"+screen.colorDepth}function I(){var a=new RegExp("/[0-9]+(.[0-9]+)*/","g");return navigator.userAgent.replace(a,"")}function J(a){var b="",c="";if(navigator.appName.match("/Internet Explorer/g")){c=["wmplayer.ocx","QuickTime.QuickTime","ShockwaveFlash.ShockwaveFlash","VideoLAN.VLCPlugin","AgControl.AgControl","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","AcroPDF.PDF","PDF.PdfCtrl","SWCtl.SWCtl"];for(var d=0;d<c.length;d++)b+=G(c[d])+a}else if(c=navigator.plugins)for(var e=0;e<c.length;e++){var f=c[e];b||(b+=a),b+=f.name;for(var g=0;g<f.length;g++)b||(b+=a),b+=f[g].type}return b}function K(){return navigator.cookieEnabled?"Yes":"No"}function L(a){var b,c,d,e,f,g,h,i,j;for(b=3&a.length,c=a.length-b,d=j,j=3735928559,f=3432918353,g=461845907,i=0;c>i;)h=255&a.charCodeAt(i)|(255&a.charCodeAt(++i))<<8|(255&a.charCodeAt(++i))<<16|(255&a.charCodeAt(++i))<<24,++i,h=(65535&h)*f+(((h>>>16)*f&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*g+(((h>>>16)*g&65535)<<16)&4294967295,d^=h,d=d<<13|d>>>19,e=5*(65535&d)+((5*(d>>>16)&65535)<<16)&4294967295,d=(65535&e)+27492+(((e>>>16)+58964&65535)<<16);switch(h=0,b){case 3:h^=(255&a.charCodeAt(i+2))<<16;break;case 2:h^=(255&a.charCodeAt(i+1))<<8;break;case 1:h^=255&a.charCodeAt(i),h=(65535&h)*f+(((h>>>16)*f&65535)<<16)&4294967295,h=h<<16|h>>>16,h=(65535&h)*g+(((h>>>16)*g&65535)<<16)&4294967295,d^=h}return d^=a.length,d^=d>>>16,d=2246822507*(65535&d)+((2246822507*(d>>>16)&65535)<<16)&4294967295,d^=d>>>13,d=3266489909*(65535&d)+((3266489909*(d>>>16)&65535)<<16)&4294967295,d^=d>>>16,d>>>0}function M(){var a="";return a+=H()+"|",a+=I()+"|",a+=J("|")+"|",a+=K(),ma="&ck2="+L(a)}function N(a,b){var c=!1;for(var d in a)if("object"!=typeof a[d])(b||"measure"!==d&&"serial"!==d)&&(V[d]=a[d],c=!0);else for(var e in a[d])V[d]||(V[d]={}),("streamName"!==e||5!==V.streaming.cmsPS&&7!==V.streaming.cmsPS)&&(V[d][e]=a[d][e],c=!0);return V.domain=g(),V.referer=i(),c}function O(a,b){if(!("play"===a|"pause"===a|"stop"===a))return c(P.wrongParameter),!1;switch(V.streaming.cmsEV="state","undefined"==typeof b||isNaN(b)||"live"===V.streaming.diffusion?V.streaming.cmsPO=z():V.streaming.cmsPO=Math.round(b),a){case"play":if(f(),!Q||5===V.streaming.cmsPS)break;V.streaming.cmsPS=5,ja||(V.streaming.cmsVI||t(),s()),q(m());break;case"pause":if(!Q||7===V.streaming.cmsPS||0===ja)break;"timeshifting"===V.streaming.diffusion?(x(),V.streaming.diffusion="replay",V.streaming.wasTimeshifting=!0):(V.streaming.cmsPS=7,ja||(V.streaming.cmsVI||t(),s()),q(m()));break;case"stop":if(!Q||!ja){Q&&!ja&&c(P.wrongFirstParameter);break}x();break;default:return!1}return!0}var P={requestSend:"INFO: Request sended : ",automaticModeActivated:"INFO: automatic mode activated",automaticModeImpossible:"ERROR: the automatic mode is not available for live or timeshift stream",accesRestricted:"WARNING: your account is not allowed to send more than one request by session to our servers. Please contact our client service to change its rights",max256:"WARNING: the maximum number of characters is limited to 256, the sended data will be truncated",positionFail:"WARNING: return value of the position function must be an int or a float",cannotUsePost:"WARNING: post() mathod cannot be called in a streaming context",cannotUseNotify:"WARNING: the notifyPlayer() cannot be called in a non streaming context",automaticNoNotify:"WARNING: the notifyPlayer() cannot be called with play or pause in an automatic mode",noInit:"ERROR: you must pass a JSON object as a parameter to the contructor \n\n1 - you have to create a JSON object \n\nvar mySettings = {\n	serial:'monSerial',\n	...,\n	levels:{\n		level_1:'mon niveau1'\n	}\n	... \n}\n\n2 - Instantiate the measure object with your JSON object as parameter\n\n var monTag = new eStatTag(mySettings);",noMeasure:"ERROR: you must specify the type of measure you want {measure:'streaming|page'}",noSerial:"ERROR: you must specify the serial number in which you want to send the measure {serial:XXXXXXX}",noCallBack:"ERROR: you must specify the position callback",noStreamInfo:"ERROR: you must specify the streaming informations\n\nvar confStreamingAnalyticsMediametrie = {\n	streaming:{\n		datas...\n	}\n}",noDiffusionType:"ERROR: you must specify the diffusion mode\n\nvar confStreamingAnalyticsMediametrie = {\n	streaming:{\n		diffusion:'live||replay||timeShift'...\n	}\n}",noPlayerName:"ERROR: you must specify a name for your player\n\nvar confStreamingAnalyticsMediametrie= {\n	streaming{\n		playerName:'jwplayer|html5...'\n	}\n}",noStreamName:"ERROR: you must specify a name for your stream\n\nvar confStreamingAnalyticsMediametrie= {\n	streaming{\n		streamName:'myStream'\n	}\n}",streamingAndCriteria:"ERROR: streaming measure doesn't accept criteria variable",accesDenied:"ERROR: your account is not allowed to send requests to our servers. Please contact our client service to change its rights",streamingAndSegments:"ERROR: streaming measure doesn't accept segments variable",wrongParameter:"ERROR: the notifyPlayer() function only accept values play, pause or stop as first parameter",wrongFirstParameter:"ERROR: the notifyPlayer() function only accept values play or pause as first parameter"},Q=!0,R=!1;e(a);var S,T={measure:{page:"exclude",streaming:"exclude"},serial:"exclude",implementation:"exclude",authURL:"exclude",measureNodesURL:"exclude",crmID:"crmid",uid:"uid",domain:"dom",master:"g",wrapper:"w",page:{levels:{level_1:"c",level_2:"p",level_3:"l3",level_4:"l4"},criteria:{critere_1:"c1",critere_2:"c2",critere_3:"c3",critere_4:"c4",critere_5:"c5"},segments:{segment_1:"seg1",segment_2:"seg2",segment_3:"seg3",segment_4:"seg4",segment_5:"seg5",segment_6:"seg6",segment_7:"seg7",segment_8:"seg8"}},streaming:{levels:{level_1:"cmsS3",level_2:"cmsS2",level_3:"cmsS1",level_4:"cmsS4",level_5:"cmsS5"},diffusion:"exclude",streamName:"cmsSN",streamURL:"cmsME",streamGenre:"cmsGR",streamDuration:"cmsDU",playerName:"cmsPL",playerVersion:"cmsPV"},newLevels:{newLevel_1:"ml1",newLevel_2:"ml2",newLevel_3:"ml3",newLevel_4:"ml4",newLevel_5:"ml5",newLevel_6:"ml6",newLevel_7:"ml7",newLevel_8:"ml8",newLevel_9:"ml9",newLevel_10:"ml10",newLevel_11:"ml11"},mediaInfo:{mediaContentId:"msCid",mediaDiffMode:"msDm",mediaChannel:"msCh"},netMeasurement:"miCh"},U=!!window.XDomainRequest,V={},W="5.3.2",X=5,Y=screen.height,Z=screen.width,$=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,_=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,aa=screen.colorDepth,ba="https:"===document.location.protocol?"https://":"http://",ca=document.characterSet||document.charset,da=ba+"mesure.streaming.estat.com/m/web/",ea="",fa=ba+"prof.estat.com/m/web/",ga=ba+"auth.estat.com/";S=d();var ha=[],ia={launch:function(){ha[0]=window.setTimeout(function(){A()},1e4),ha[1]=window.setTimeout(function(){A()},2e4),ha[2]=window.setTimeout(function(){A()},4e4),ha[3]=window.setInterval(function(){A()},6e4)},stop:function(){for(var a=0;3>a;a++)window.clearTimeout(ha[a]);window.clearInterval(ha[3]),ha=[]}},ja=0,ka=!1,la=null,ma=M();N(a,!0),"streaming"===V.measure&&Q&&t();var na={setDebug:function(a){return R=a,a},post:function(){return b("INFO: Call post method"),"page"!==V.measure?(b(P.cannotUsePost),!1):(p(m()),!0)},set:function(a){b("INFO: Call set method");var c=!1;return c=N(a)},notifyPlayer:function(a,c){var d="INFO: Call notifyPlayer method with state : "+a;return c&&(d=d+" and position :"+c),b(d),"streaming"!==V.measure?(b(P.cannotUseNotify),!1):"automatic"===V.implementation&&"stop"!==a?(b(P.automaticNoNotify),!1):("automatic"===V.implementation&&(c||(c=z()),v()),O(a,c)?!0:void 0)}};return na};