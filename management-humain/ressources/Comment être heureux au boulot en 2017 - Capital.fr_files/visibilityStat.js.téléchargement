var visibilityStats=function(){var h=new Array();var b=false;var f={};var g=0;var j=this;var k={};this.findVideos=function(){c(true);var n=document.querySelectorAll("iframe");for(var l=0;l<n.length;l++){if(n[l].hasAttribute("src")){if(n[l].getAttribute("src").match(/(ultimedia|digiteka)\.(com|net)/)&&h.indexOf(n[l])==-1){b=h.length;h.push(n[l]);f[b]=false;n[l].contentWindow.postMessage("your_id_visi="+h.indexOf(n[l]),"*")}else{if(h.indexOf(n[l])!=-1){var o=h.indexOf(n[l]);n[l].contentWindow.postMessage("your_id_visi="+o,"*")}}}}c(true);window.addEventListener("scroll",function(m){clearTimeout(g);g=setTimeout(function(){c()},15)},false)};function c(m){m=typeof m=="undefined"?false:m==true;for(var l=0;l<h.length;l++){k[l]=d(h[l]);if(k[l]&&(!f[l]||m)){a(l,true);f[l]=k[l]}else{if(!k[l]&&(f[l]||m)){a(l,false);f[l]=k[l]}}}}function d(l){var n=0.55;if(typeof jQuery==="function"&&l instanceof jQuery){l=l[0]}var m=l.getBoundingClientRect();return(m.top>=(-1*n*m.height)&&m.left>=0&&m.bottom<=(window.innerHeight||document.documentElement.clientHeight)+(n*m.height)&&m.right<=(window.innerWidth||document.documentElement.clientWidth))}function e(m){if(typeof m.data.message!="undefined"&&m.data.message=="newVideo"){j.findVideos()}var l=typeof m.data=="string"?m.data.match(/is_visi_(\d)/):false;if(l){i(parseInt(l[1]))}}function i(l){a(l,d(h[l]),true)}function a(o,n,l){var m=n?"visibilityStat_false":"visibilityStat_true";m=l?m+"-np":m;h[o].contentWindow.postMessage(m,"*")}if(window.addEventListener){window.addEventListener("message",e,false)}else{window.attachEvent("onmessage",e)}this.findVideos()};visibilityStats=new visibilityStats();