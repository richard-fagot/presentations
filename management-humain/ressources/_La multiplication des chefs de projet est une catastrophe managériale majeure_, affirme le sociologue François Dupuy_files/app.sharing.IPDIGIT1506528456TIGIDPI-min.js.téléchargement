App.Sharing=App.Sharing||{};App.Sharing=function(params){this.escapeHtml=function(string){entityMap={"#":""};string=String(string).replace(/[#]/g,function(s){return entityMap[s];});return string;};this.inAjaxProcess=false;this.prefixClass="jq";if(params!=undefined){if(params.prefixClass!=null){this.prefixClass=params.prefixClass;}}this._init=function(){var _this=this;_this.initTwitter($("."+_this.prefixClass+"twitter"));_this.initFacebook($("."+_this.prefixClass+"facebook"));_this.initViadeo($("."+_this.prefixClass+"viadeo"));_this.initLinkedIn($("."+_this.prefixClass+"linked-in"));_this.initGooglePlus($("."+_this.prefixClass+"googlePlus"));_this.initPinterest($("."+_this.prefixClass+"pinterest"));return _this;};this.initTwitter=function(element){var _this=this;if(jQuery(".jqTwitterShares").length>0){var url=encodeURI("https://cdn.api.twitter.com/1/urls/count.json?url="+encodeURI(window.location.href));jQuery.ajax({type:"GET",dataType:"jsonp",data:{},url:url,error:function(jqXHR,textStatus,errorThrown){console.log(jqXHR);},success:function(data){if(data.count!="undefined"){jQuery(".jqTwitterShares").text(data.count);}}});}element.on("click",function(e){var _title=_this.escapeHtml($(this).attr("data-title"));var _url=$(this).attr("data-url")?$(this).attr("data-url"):window.location.href;e.preventDefault();window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(_title)+"&url="+encodeURIComponent(_url)+"&via=usinenouvelle","Partager_sur_Twitter",_this._getPopupOptions(600,300));});return _this;};this.initFacebook=function(element){var _this=this;if(jQuery(".jqFacebookShares").length>0){var url=encodeURI("http://graph.facebook.com/?id="+window.location.href);jQuery.ajax({type:"GET",dataType:"jsonp",data:{},url:url,error:function(jqXHR,textStatus,errorThrown){console.log(jqXHR);},success:function(data){if(data.share){jQuery(".jqFacebookShares").text(data.share.share_count);}}});}element.on("click",function(e){var _url=$(this).attr("data-url")?$(this).attr("data-url"):window.location.href;e.preventDefault();window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURI(_url),"Partager_sur_Facebook",_this._getPopupOptions(600,300));});return _this;};this.initViadeo=function(element){var _this=this;element.on("click",function(e){var _url=$(this).attr("data-url")?$(this).attr("data-url"):window.location.href;e.preventDefault();window.open("https://www.viadeo.com/shareit/share/?url="+encodeURI(_url)+"&title="+encodeURI(jQuery(this).attr("data-title")),"Partager_sur_Viadeo",_this._getPopupOptions(1200,600));});return _this;};this.initLinkedIn=function(element){var _this=this;if(jQuery(".jqLinkedinShares").length){var url=encodeURI("https://www.linkedin.com/countserv/count/share?url="+window.location.href);jQuery.ajax({type:"GET",dataType:"jsonp",data:{},url:url,error:function(jqXHR,textStatus,errorThrown){console.log(jqXHR);},success:function(data){if(data.count!="undefined"){jQuery(".jqLinkedinShares").text(data.count);}}});}element.on("click",function(e){var _url=$(this).attr("data-url")?$(this).attr("data-url"):window.location.href;e.preventDefault();window.open("https://www.linkedin.com/shareArticle?mini=true&url="+encodeURI(_url)+"&title="+encodeURIComponent($(this).attr("data-title")),"Partager_sur_LinkedIn",_this._getPopupOptions(650,600));});return _this;};this.initGooglePlus=function(element){var _this=this;if(jQuery(".jqGooglePlusShares").length){var uri=window.location.href;$.ajax({type:"POST",url:"https://clients6.google.com/rpc",processData:true,contentType:"application/json",data:JSON.stringify({method:"pos.plusones.get",id:uri,params:{nolog:true,id:uri,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"}),success:function(response){if(response.result){jQuery(".jqGooglePlusShares").text(response.result.metadata.globalCounts.count);}}});}element.on("click",function(e){var _url=$(this).attr("data-url")?$(this).attr("data-url"):window.location.href;e.preventDefault();window.open("https://plus.google.com/share?url="+encodeURI(_url),"Partager_sur_googlePlus",_this._getPopupOptions(500,500));});return _this;};this.initPinterest=function(element){var _this=this;element.on("click",function(e){var _url=$(this).attr("data-url")?$(this).attr("data-url"):window.location.href;e.preventDefault();if($(this).attr(("data-imageUrl"))!=undefined){window.open("https://pinterest.com/pin/create/button/?url="+encodeURI(_url)+"&media="+encodeURI($(this).attr(("data-imageUrl"))),"Partager_sur_Pinterest",_this._getPopupOptions(750,315));}});return _this;};this._getPopupOptions=function(width,height){return"height="+height+", width="+width+", toolbar=no, menubar=yes, location=no, resizable=yes, scrollbars=no, status=no";};this._init();};