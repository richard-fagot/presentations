window.App=window.App||{};App.Forms=App.Forms||{};App.Forms={FormList:App.Forms.FormList||{},checkFieldValidity:function(_field,_event){try{var event,field;if(_event){event=_event;}else{event=_field.target?_field:null;}field=_field.target?_field.target:_field;if(field.nodeName!=="INPUT"&&field.nodeName!=="SELECT"&&field.nodeName!=="TEXTAREA"){return true;}if(field.nodeName=="INPUT"&&field.type=="submit"&&field.type=="reset"&&field.type=="button"){return true;}var jField=jQuery(field),jSubForm=jField.parents(".jqSubForm:first").get(0);var form=jSubForm||field.form,formName=form.id?form.id.replace(/:.*$/,""):"form",isMultiValue=(/\[\]$/.exec(field.name)!==null),fieldName=jSubForm?String(field.name).replace(/^.*\[([^\]]+)\]$/,"$1"):String(field.name).replace(/\[\]$/,"");if(fieldName==""&&field.getAttribute("name")===null){fieldName=field.id;}if(!App.Forms.FormList[formName]){return true;}var ruleset=App.Forms.FormList[formName][fieldName];if(!ruleset){return true;}ruleset.options=ruleset.options||{};if(field.disabled){App.Forms.displayFieldStatus(field,true);if(_event){App.Forms.updateErrorResume(formName);}return true;}if(event&&ruleset.checkOn){var doCheck=ruleset.checkOn[event.type]===undefined?true:ruleset.checkOn[event.type];if(!doCheck){return;}}var isCKEditor=jField.hasClass("ckeditor");if(isCKEditor){CKEDITOR.instances[field.id].updateElement();var fckTextareaContent=field.value;field.value=Utile.htmlEntitiesDecode(fckTextareaContent.replace(/(<\/?[\S][^>]*>)/gi,""));}if(ruleset.tooltip&&field.value==ruleset.tooltip){field.value="";}var filteredValue=App.Forms.applyFilters(field.value,ruleset);var canBeEmpty=!App.Forms.rulesetHasValidator(ruleset,"NotEmpty");if(!canBeEmpty||filteredValue!=""){var i=0;while(ruleset[i]){if(ruleset[i].disabled){i++;continue;}if(ruleset[i]["applyIf"]&&!ruleset[i].applyIf(formName)){App.Forms.displayFieldStatus(field,true,null,ruleset,i);i++;continue;}var validatorName=ruleset[i].name,originalValue=field.value;field.value=filteredValue;var validatorReturn=App.Forms.Validator[validatorName](field,ruleset[i].parameters);field.value=originalValue;if(validatorReturn!==true){if(isCKEditor){field.value=fckTextareaContent;}App.Forms.displayFieldStatus(field,false,validatorReturn,ruleset,i);if(_event){App.Forms.updateErrorResume(formName);}return false;}i++;}}if(isCKEditor){field.value=fckTextareaContent;}App.Forms.displayFieldStatus(field,true,null,ruleset,i-1);if(_event){App.Forms.updateErrorResume(formName);}return true;}catch(e){if(window.console){console.debug(e);}}},applyFilters:function(_value,ruleset){try{var value=_value;if(ruleset.filters&&ruleset.filters.length){var i=0;while(ruleset.filters[i]){var filterName=ruleset.filters[i].name;value=App.Forms.Filter[filterName](value,ruleset.filters[i].parameters);i++;}}return value;}catch(e){if(window.console){console.debug(e);}}},checkFormValidity:function(form){var event=(form.target)?form:null;form=form.target&&!form.nodeName?form.target:form;if(form.nodeName!="FORM"){return;}var formName=form.id?form.id:"form",formValidity=true,fieldValidity=false,validatedFields={};if(App.Forms.FormList[formName+"_preValidation"]){if(!App.Forms.FormList[formName+"_preValidation"]()){App.Forms.updateErrorResume(formName);return false;}}if(!App.Forms.FormList[formName]){return true;}var fieldToFocus=null;for(var i=0;i<form.elements.length;i++){var field=form.elements[i];if(field.name===undefined){continue;}var fieldId=field.name.replace(/^.*\[([^\]]+)\]\[?\]?$/,"$1");if(validatedFields[fieldId]){continue;}var tmpInput=document.createElement("INPUT");var doNothandlePlaceholder=!("placeholder" in tmpInput);if(doNothandlePlaceholder){jQuery(field).trigger("focusin");}fieldValidity=App.Forms.checkFieldValidity(form.elements[i],event);if(doNothandlePlaceholder){jQuery(field).trigger("focusout");}if(fieldValidity===undefined){continue;}formValidity&=fieldValidity;if(!fieldToFocus&&!fieldValidity){fieldToFocus=field;}validatedFields[fieldId]=true;}for(var id in App.Forms.FormList[formName]){var ruleset=App.Forms.FormList[formName][id];var i=0;while(ruleset[i]){if(ruleset[i].control=="NotEmpty"){if(ruleset[i]["applyIf"]&&!ruleset[i].applyIf(formName)){App.Forms.displayFieldStatus(id,true,null,ruleset,i);i++;continue;}if(validatedFields[id]===undefined){var errorMessage="";if(ruleset[i]["errorMessage"]){errorMessage=ruleset[i]["errorMessage"];}fieldValidity=App.Forms.displayFieldStatus(id,false,errorMessage,ruleset,i);formValidity&=fieldValidity;}}i++;}}if(event&&!formValidity){event.stopPropagation();}if(!formValidity){if(fieldToFocus){try{fieldToFocus.focus();}catch(e){}}if(jQuery.scrollTo){jQuery.scrollTo(fieldToFocus,250);}else{window.scrollTo(0,200);}}formValidity=formValidity?true:false;if(App.Forms.FormList[formName+"_postValidation"]){if(!App.Forms.FormList[formName+"_postValidation"](formValidity)){App.Forms.updateErrorResume(formName);return false;}}App.Forms.updateErrorResume(formName);return formValidity;},clearFieldStatus:function(form,field){var fieldName=String(field.name).replace("[]",""),jElementList=jQuery("#"+field.id+", #errorMessage_"+fieldName+", #errorSignaletique_"+fieldName+", #errorLabel_"+fieldName,form),jMessage=jQuery("#errorMessage_"+fieldName,form);jElementList.removeClass("error");jMessage.html("");},displayFieldStatus:function(field,isValid,message,ruleset,rulesetIndex){if(!ruleset){ruleset={};}ruleset.message=ruleset.message||{};if(typeof(field)=="string"){var newField=document.getElementById(field);if(newField){field=newField;}}if(typeof(field)=="object"){var jField=jQuery(field),jSubForm=jField.parents(".jqSubForm:first").get(0);var form=jSubForm||field.form,fieldId=field.id.replace(/:/g,"\\:"),formName=form.name?form.name:"form",isMultiValue=field.name.match(/\[\]$/),fieldName=String(field.name).replace("[]",""),jField=jQuery(field),showValidMessage=ruleset.message.showValidMessage===undefined?true:ruleset.message.showValidMessage;if(fieldName==""){fieldName=field.id;}}var jElementList=jQuery("#"+fieldId+", #errorMessage_"+fieldId+", #errorSignaletique_"+fieldId+", #errorLabel_"+fieldId),jMessage=jQuery("#errorMessage_"+fieldId);if((!isValid)||(showValidMessage&&isValid)){jElementList.toggleClass("error",!isValid);jMessage.html("");}else{jElementList.removeClass("error");}try{if(message&&ruleset[rulesetIndex]&&ruleset[rulesetIndex]["errorMessage"]){message=ruleset[rulesetIndex]["errorMessage"];}else{message=message?ruleset.message[message]||translator[message]||message:null;}}catch(e){}if(message&&rulesetIndex!==undefined&&ruleset[rulesetIndex]&&ruleset[rulesetIndex]["parameters"]){var parameters=ruleset[rulesetIndex]["parameters"];for(var i in parameters){message=message.replace("%"+i+"%",parameters[i]);}}jMessage.html(message);return isValid;},updateErrorResume:function(form){var jForm=form.nodeName?jQuery(form):jQuery("#"+form),jFormErrorResume=jQuery(".errorResume",jForm);if(!jFormErrorResume.length){return;}var jFieldList=jQuery(":input.error",jForm);if(!jFieldList.length){jFormErrorResume.removeClass("error").html("");return;}if(jForm.attr("data-static-error-resume")){var message=jForm.attr("data-static-error-resume");}else{if(jFieldList.length>1){var message=jForm.attr("data-error-resume-many")||"Veuillez remplir correctement les champs %s";}else{var message=jForm.attr("data-error-resume-single")||"Veuillez remplir correctement le champ %s";}var fieldListMessage="";for(var i=0,iMax=jFieldList.length;i<iMax;i++){var fieldLabel=null;if(jFieldList[i].getAttribute("data-label")){fieldLabel=jFieldList[i].getAttribute("data-label");}if(!fieldLabel){var label=jQuery('label[for="'+jFieldList[i].id+'"]').html();fieldLabel=label?label.replace(/\*\s*$/,""):null;}if(!fieldLabel){fieldLabel=(jFieldList[i].name?jFieldList[i].name:jFieldList[i].id).replace(/^.*\[([^\]]+)\]$/,"$1");}fieldListMessage+=(i?(i<iMax-1?", ":" et "):"")+fieldLabel;}message=message.replace(/%s/,fieldListMessage);}jFormErrorResume.html(message).addClass("error");},rulesetHasValidator:function(ruleset,validator){var i=0;while(ruleset[i]){if(!ruleset[i].disabled&&(ruleset[i].control==validator||ruleset[i].control==name)){return true;}i++;}return false;},disableRulesetValidator:function(_ruleset,_validator,_isDisabled){for(var i=0,iMax=_ruleset.length;i<iMax;i++){if(_ruleset[i].control==_validator||_ruleset[i].name==_validator){_ruleset[i].disabled=_isDisabled;return true;}}return false;},rulesetHasFilter:function(_ruleset,_filter){if(!"filters" in _ruleset){return false;}for(var i=0,iMax=_ruleset.filters.length;i<iMax;i++){if(!_ruleset.filters[i].disabled&&(_ruleset.filters[i].name==_filter)){return true;}}return false;},addValidator:function(_ruleset,_validatorName,_parameters){var validator={control:null,disabled:false,name:null,parameters:_parameters||{}};if(_validatorName.search(/^ZendX?_Validate_/)!=-1){validator.name=_validatorName;validator.control=_validatorName.replace(/^ZendX?_Validate_/,"");}else{validator.control=_validatorName;}if(!validator.name){var validatorSearchList=["Zend_Validate_","ZendX_Validate_"];for(var iSearchList in validatorSearchList){var search=validatorSearchList[iSearchList]+validator.control;for(var methodName in App.Forms.Validator){if(methodName.search(search)===0){validator.name=methodName;break;}}}if(!validator.name){App.Dialog.error("PAS TROUVEE");}}Array.prototype.push.call(_ruleset,validator);return validator;},isRequired:function(_ruleset,_isRequired){if(!_ruleset){return false;}var notEmptyValidator;for(var i=0,iMax=_ruleset.length;i<iMax;i++){if(_ruleset[i].control=="NotEmpty"){notEmptyValidator=_ruleset[i];break;}}if(_isRequired===undefined){if(!notEmptyValidator||notEmptyValidator.disabled){return false;}return true;}if(!notEmptyValidator){notEmptyValidator=App.Forms.addValidator(_ruleset,"NotEmpty");}notEmptyValidator.disabled=!_isRequired;if(_ruleset.id){var jFieldDOMElements=jQuery('label[for="'+_ruleset.id+'"], :input#'+_ruleset.id);if(_isRequired){jFieldDOMElements.addClass("required");}else{jFieldDOMElements.removeClass("required");}}},parseDependencies:function(form){var formName=form.id?form.id.replace(/:.*$/,""):"form",rulesetList=App.Forms.FormList[formName];if(!rulesetList){return;}var dependencies={};for(var fieldName in rulesetList){if(rulesetList[fieldName]["requiredIf"]!==undefined){var chunks=rulesetList[fieldName]["requiredIf"].split(/(\$[_a-z0-9]+)/i);for(var i=0,iMax=chunks.length;i<iMax;i++){if(chunks[i][0]!="$"){continue;}var changedField=chunks[i].substring(1);if(dependencies[changedField]===undefined){dependencies[changedField]={};}dependencies[changedField][fieldName]=true;}var func="(function() {\nreturn function(formName) {\n return (";func+=rulesetList[fieldName]["requiredIf"].replace(/\$([_a-z0-9]+)/gm,'\nApp.Forms.getFieldValue(formName, "$1")');func+=")\n }\n })()";rulesetList[fieldName]["requiredIf"]=eval(func);}}rulesetList.__dependencies=dependencies;},fieldChanged:function(field){var field="target" in field?field.target:field;if(field.nodeName!=="INPUT"&&field.nodeName!=="SELECT"&&field.nodeName!=="TEXTAREA"){return true;}var jField=jQuery(field),jSubForm=jField.parents(".jqSubForm:first").get(0);var form=jSubForm||field.form,formName=form.id?form.id.replace(/:.*$/,""):"form",isMultiValue=(/\[\]$/.exec(field.name)!==null),fieldName=jSubForm?String(field.name).replace(/^.*\[([^\]]+)\]$/,"$1"):String(field.name).replace(/\[\]$/,"");if(fieldName==""&&field.getAttribute("name")===null){fieldName=field.id;}if(!App.Forms.FormList[formName]){return;}var rulesetList=App.Forms.FormList[formName];if(rulesetList.__dependencies&&rulesetList.__dependencies[fieldName]){for(var dependantFieldName in rulesetList.__dependencies[fieldName]){if(rulesetList[dependantFieldName]&&rulesetList[dependantFieldName]["requiredIf"]){App.Forms.isRequired(rulesetList[dependantFieldName],rulesetList[dependantFieldName].requiredIf(formName));}}}},getFieldValue:function(formName,fieldName){var jField=jQuery("#"+formName+' :input[name^="'+fieldName+'"]'),valueList=[],isList=false;for(var i=0,iMax=jField.length;i<iMax;i++){var field=jField[i];if(field.disabled){continue;}if(field.name!=fieldName&&field.name!=fieldName+"[]"){continue;}if(field.name==fieldName+"[]"){isList=true;}if(field.type=="checkbox"||field.type=="radio"){if(field.checked){valueList.push(field.value);}}else{valueList.push(field.value);}}if(isList){return valueList;}return valueList.pop();},Validator:{Zend_Validate_NotEmpty:function(element,parameters){if(element.type=="checkbox"||element.type=="radio"){return(jQuery("input:checked[type="+element.type+"][name='"+element.name+"']").length>0)?true:"notChecked";}else{return(element.value.replace("\r","").replace("\n"," ").match(/^\s*$/)===null)?true:"isEmpty";}},Zend_Validate_Alnum:function(element,parameters){var value=element.value;if(parameters.allowWhiteSpace&&value.match(/^[a-z0-9\s]*$/i)!==null){return true;}if(value.match(/^[a-z0-9\s]*$/i)!==null){return true;}return"notAlnum";},Zend_Validate_Float:function(element,parameters){var value=String(element.value);value=jQuery.trim(value.replace(",","."));element.value=value;if(value==""){return true;}if(value.match(/^[-+]?\d+(?:[\.]\d+)?$/)===null){return"notFloat";}if(parseFloat(value)!==NaN){return true;}return"notFloat";},Zend_Validate_Int:function(element,parameters){var value=String(element.value);if(value==""){return true;}if(value.match(/^[-+]?\d+$/)===null){return"notInt";}if(parseInt(value)!==NaN){return true;}return"notInt";},ZendX_Validate_IntOrEmpty:function(element,parameters){if(App.Forms.Validator.Zend_Validate_NotEmpty(element,parameters)===true){return App.Forms.Validator.Zend_Validate_Int(element,parameters);}return true;},Zend_Validate_Between:function(element,parameters){if(element.value==""){return true;}var value=parseFloat(element.value);if(value===NaN){return"notBetween";}if(value>=parameters.min&&value<=parameters.max){return true;}return"notBetween";},ZendX_Validate_Captcha:function(element,parameters){return true;},ZendX_Validate_Confirm:function(element,parameters){var confirmElement=document.getElementById(parameters.confirmFieldId);if(!confirmElement){return;}if(element.value==confirmElement.value){return true;}return"notSameValue";},Zend_Validate_InArray:function(element,parameters){if(typeof(parameters.haystack)=="string"){parameters.haystack=String(parameters.haystack).split(";");}if(parameters.haystack instanceof Array){if(!parameters.haystack.indexOf){for(var i=0;i<parameters.haystack.length;i++){if(parameters.haystack[i]==element.value||parameters.haystack[i]==parseInt(element.value)){return(true);}}}else{if(parameters.haystack.indexOf(element.value)>=0||parameters.haystack.indexOf(parseInt(element.value))>=0){return true;}}}else{if(parameters.haystack instanceof Object){if(parameters.haystack[element.value]||false){return true;}}}return"notInArray";},ZendX_Validate_InArrayOrEmpty:function(element,parameters){if(App.Forms.Validator.Zend_Validate_NotEmpty(element,parameters)===true){return App.Forms.Validator.Zend_Validate_InArray(element,parameters);}return true;},Zend_Validate_Digits:function(element,parameters){if(element.value.match(/^[0-9\s]*$/i)!==null){return true;}return"notDigits";},Zend_Validate_StringLength:function(element,parameters){if(parameters.max>0&&element.value.length>parameters.max){return"stringLengthTooLong";}if(parameters.min>0&&element.value.length<parameters.min){return"stringLengthTooShort";}return true;},Zend_Validate_EmailAddress:function(element,parameters){var value=element.value;if(value.match(/^((.+)@([^@]+))?$/i)===null){return"emailAddressInvalid";}if(parameters.userCub===undefined||parameters.userCub){var ajaxResponse=jQuery.ajax({type:"POST",url:App.CUB.urlAjax,data:({name:element.name.replace("[]",""),value:value,numero_form:App.CUB.numero_form,fromJs:1}),async:false,cache:false});var headers=ajaxResponse.responseHeaders;if(!headers&&App.HTTP.parseHttpHeaderString){headers=App.HTTP.parseHttpHeaderString(ajaxResponse.getAllResponseHeaders());}else{if(Utile.parseHTTPHeaders){headers=Utile.parseHTTPHeaders(ajaxResponse.getAllResponseHeaders());}}if(headers["X-Cub-Field-Validity"]=="VALID"){return true;}var response=ajaxResponse.responseText;}if(parseInt(response)===0){return"notUniqueEmail";}else{return App.Forms.parseMessage(translator.emailAddressInvalidHostname,value,{hostname:value.replace(/^[^@]+@/,"")});}},Zend_Validate_Regex:function(element,parameters){var regexp=typeof(parameters.pattern)=="string"?eval(parameters.pattern):parameters.pattern;if(element.value==""||element.value.match(regexp)!==null){return true;}return"regexNotMatch";},ZendX_Validate_GreaterThanField:function(element,parameters){var tokenElement=document.getElementById(parameters.comparedFieldId);if(tokenElement&&+element.value>+tokenElement.value){return true;}return"notGreaterThanField";},ZendX_Validate_LessThanField:function(element,parameters){var tokenElement=document.getElementById(parameters.comparedFieldId);if(tokenElement&&+element.value<+tokenElement.value){return true;}return"notLessThanField";},Zend_Validate_Identical:function(element,parameters){var tokenElement=document.getElementById(parameters.token);if(element.value==(tokenElement?tokenElement.value:"")){return true;}return"notSame";},ZendX_Validate_NotIdentical:function(element,parameters){var modelElement=document.getElementById(parameters.fieldId);if(!modelElement){return;}if(element.value!==modelElement.value){return true;}return"sameValue";},ZendX_Validate_DomainName:function(element,parameters){if(!parameters.ajaxMethodUrl||parameters.ajaxMethodUrl==""){return"Merci de définir l'url de controle AJAX";}var value=element.value;var ajaxResponse=jQuery.ajax({type:"POST",url:parameters.ajaxMethodUrl,data:{domainName:value,domainType:parameters.hostType||"ANY"},async:false,cache:false});var answer=ajaxResponse.responseText;return answer!=1?answer:true;},ZendX_Validate_String:function(element,parameters){return App.Forms.Validator.Zend_Validate_Regex(element,parameters);},ZendX_Validate_Phone:function(element,parameters){if(App.Forms.Validator.Zend_Validate_Regex(element,parameters)===true){return true;}return"notPhone";},ZendX_Validate_SiretSiren:function(element,parameters){if(App.Forms.Validator.Zend_Validate_Regex(element,parameters)!==true){return"notSiretSiren";}return true;},ZendX_Validate_PostalCode:function(element,parameters){if(App.Forms.Validator.Zend_Validate_Regex(element,parameters)!==true){return"notPostalCode";}return true;},ZendX_Validate_Email:function(element,parameters){parameters.pattern=/^([a-zA-Z0-9]+(([\.\-\_]?[a-zA-Z0-9]+)+)?)\@(([a-zA-Z0-9]+[\.\-\_])+[a-zA-Z]{2,4})$/i;if(App.Forms.Validator.Zend_Validate_Regex(element,parameters)!==true){return"emailAddressInvalid";}return true;},ZendX_Validate_URL:function(element,parameters){if(App.Forms.Validator.Zend_Validate_Regex(element,parameters)!==true){return"notValidURL";}return true;},ZendX_Validate_Date:function(element,parameters){var pattern=parameters.format;var tableauCaractereSpeciaux=["\\","/",".","-","[","]","(",")","{","}","*","+","?","|","^","^"];for(i in tableauCaractereSpeciaux){pattern=pattern.replace(new RegExp("[\\"+tableauCaractereSpeciaux[i]+"]","g"),"\\"+tableauCaractereSpeciaux[i]);}var tableauDatePattern=new Array();tableauDatePattern[0]={lettre:"d",masque:"(?:0[1-9]|[12]\\d|3[01])"};tableauDatePattern[1]={lettre:"Y",masque:"\\d{4}"};tableauDatePattern[2]={lettre:"m",masque:"(?:0\\d|1[0-2])"};tableauDatePattern[3]={lettre:"H",masque:"(?:[01]\\d|2[0-4])"};tableauDatePattern[4]={lettre:"i",masque:"[0-6]\\d"};tableauDatePattern[5]={lettre:"s",masque:"[0-6]\\d"};tableauDatePattern[6]={lettre:"DDD",masque:"[a-zA-Z]+"};for(i in tableauDatePattern){pattern=pattern.replace(new RegExp(tableauDatePattern[i]["lettre"],"g"),tableauDatePattern[i]["masque"]);}parameters.pattern=new RegExp("^"+pattern+"$","i");if(App.Forms.Validator.Zend_Validate_Regex(element,parameters)!==true){return"dateInvalid";}return true;},ZendX_Validate_AbonneBjd:function(element,parameters){var values="noAbonne="+element.value+"&sourcesId="+parameters.sources_id,ajaxResponse=jQuery.ajax({type:"POST",url:"/ajax/checkNumeroAbonne",data:values,async:false,cache:false});if(ajaxResponse.responseText!="1"){return"notAbonneBjd";}else{return true;}},ZendX_Validate_Trad:function(element,parameters){var keyElement=document.getElementById(parameters.keyFieldId),keyMatch=keyElement.value.match(/_VAR(\d+)_/g),countKey=keyMatch!=null?keyMatch.length:null,tradMatch=element.value.match(/%(\d+)s/g),tradCount=tradMatch!=null?tradMatch.length:null;if(tradCount===countKey){return true;}return"notTrad";},ZendX_Validate_DomaineEmail:function(element,parameters){var values=element.name+"="+element.value,ajaxResponse=jQuery.ajax({type:"POST",url:"/ajax.php?method=postEmailDomain",dataType:"json",data:values,async:false,cache:false,success:function(data){var bgCss=(data.response.error==1)?"none":"url(/images/icon/check.png) 99% center no-repeat";$("#"+element.name).css("background",bgCss);}});return(ajaxResponse.responseJSON.response.error==1)?ajaxResponse.responseJSON.response.errorMsg:true;}},Filter:{Zend_Filter_Digits:function(value,parameters){return value.replace(/[^\d]/g,"");},ZendX_Filter_NormalizePhoneNumber:function(value,parameters){return value.replace(/[^\d]+/g,"");},ZendX_Filter_RemoveSpaces:function(value,parameters){return value.replace(/[\s]+/g,"");},ZendX_Filter_RemoveTags:function(value,parameters){return value.replace(/<[^>]+>/g," ");}},parseMessage:function(message,value,parameters){message=message.replace("%value%",value);for(prop in parameters){message=message.replace("%"+prop+"%",parameters[prop]);}return message;},applyTooltips:function(form){if(form.nodeName!="FORM"){return;}var formName=form.id?form.id:"form";if(!App.Forms.FormList[formName]){return true;}for(var i=0;i<form.elements.length;i++){var field=form.elements[i],fieldName=field.name||"";if(!field.id){field.id=App.String.randomUID();}var ruleset=App.Forms.FormList[formName][fieldName];if(!ruleset){continue;}if(ruleset.tooltip){jQuery(field).emptyonclick({defaultValue:ruleset.tooltip,defaultClass:"defaultValue"});}}}};jQuery(function(){jQuery(document).on("submit","form",function(event){if(typeof CKEDITOR!="undefined"){CKEDITOR.on("instanceReady",function(){$.each(CKEDITOR.instances,function(instance){CKEDITOR.instances[instance].on("blur",function(e){for(instance in CKEDITOR.instances){CKEDITOR.instances[instance].updateElement();}});});});}var formValidity=App.Forms.checkFormValidity(this);if(!formValidity&&App.Indicator&&App.Indicator.bodyThrobber){App.Indicator.bodyThrobber(false);}return formValidity;}).each(function(){App.Forms.updateErrorResume(this);});jQuery(document).on("change",":input",function(event){App.Forms.checkFieldValidity(this,event);App.Forms.fieldChanged(this);});});translator=window.translator||{};translator.notAlnum="La valeur saisie ne contient pas uniquement des caractères alpha-numériques.";translator.notAlpha="La valeur saisie ne contient pas que des lettres.";translator.notBetween="La valeur saisie n'est pas comprise entre %min% et %max% inclus.";translator.notBetweenStrict="La valeur saisie n'est pas comprise entre %min% et %max% exclus.";translator["dateNotYYYY-MM-DD"]="La valeur saisie n'est pas une date au format AAAA-MM-JJ (exemple : 2000-12-31).";translator.dateInvalid="La valeur saisie n'est pas une date valide.";translator.dateFalseFormat="La valeur saisie n'est pas une date valide au format JJ/MM/AAAA (exemple : 31/12/2000).";translator.notDigits="La valeur saisie ne contient pas que des chiffres.";translator.notUniqueEmail="Cette adresse email est déjà utilisée.";translator.EmailUniqueNotAbositeNotTesteur="Vous avez déjà procédé à une inscription à nos services précédemment. Si vous souhaitez renouveler un service ou vous réabonner, veuillez nous contacter directement au 01 77 92 96 42 ou par mail à lsa-expert@infopro.fr.";translator.emailAddressInvalid="La valeur saisie n'est pas une adresse mail valide selon le format adresse@domaine.tld";translator.emailAddressInvalidHostname="'%hostname%' n'est pas un domaine valide pour l'adresse mail '%value%'.";translator.hostnameInvalidHostname="'%hostname%' n'est pas un domaine valide";translator.emailAddressInvalidMxRecord="Le nom de domaine n'est pas valide.";translator.emailAddressDotAtom="'%localPart%' ne respecte pas le format dot-atom.";translator.emailAddressQuotedString="'%localPart%' ne respecte pas le format quoted-string.";translator.emailAddressInvalidLocalPart="'%localPart%' n'est pas une adresse individuelle valide.";translator.emailAddressLengthExceeded="La valeur saisie dépasse le nombre de caratère maximum autorisé.";translator.notFloat="La valeur saisie n'est pas un nombre décimal.";translator.notGreaterThan="La valeur saisie n'est pas strictement supérieur à '%min%'.";translator.notGreaterThanField="La valeur saisie n'est pas strictement supérieur à la valeur du champs '%field%'.";translator.notInt="La valeur saisie n'est pas un nombre entier.";translator.notLessThan="La valeur saisie n'est pas strictement inférieur à '%max%'.";translator.notLessThanField="La valeur saisie n'est pas strictement inférieur à la valeur du champs '%field%'.";translator.isEmpty="Veuillez remplir le champ.";translator.stringEmpty="Ce champ est vide : vous devez le compléter.";translator.regexNotMatch="Il ne s'agit pas d'une chaine de caractères alpha-numériques valide.";translator.stringLengthTooShort="La valeur saisie fait moins de %min% caractères.";translator.stringLengthTooLong="La valeur saisie fait plus de %max% caractères.";translator.notSame="Les mots de passe ne correspondent pas.";translator.notSameValue="Les emails ne correspondent pas.";translator.notChecked="Veuillez cocher la case.";translator.notInArray="Veuillez choisir une possibilité.";translator.notValidURL="URL non valide.";translator.notPhone="N'est pas un numéro téléphonique valide.";translator.notFrenchCp="Un code postal français est composé de 5 chiffres.";translator.notPostalCode="Code postal invalide.";translator.notSiretSiren="Un numéro de SIREN ou SIRET contient 9 ou 14 chiffres.";translator.sirenChecksumError="Numéro SIREN invalide.";translator.siretChecksumError="Numéro SIRET invalide.";jQuery(document).delegate(":input[data-numeric-type]","keydown",function(event){var target=event.target,jTarget=jQuery(target),data=jTarget.data(),keyMapCode=App.Keyboard.eventKeyMapCode(event);if(App.Keyboard.isNavigationEvent(event,keyMapCode)){return true;}if(App.Keyboard.isEditingEvent(event,keyMapCode)){return true;}if(App.Keyboard.isNumericEvent(event,keyMapCode)){return true;}if(!data.numericType){return false;}if(keyMapCode==KEY_MINUS||keyMapCode==KEY_NUM_MINUS||keyMapCode==KEY_NUM_PLUS||keyMapCode==KEY_PLUS){if(data.numericType[0].toLowerCase()=="u"){return false;}var caretPos=(jQuery.fn.getSelection)?jTarget.getSelection().start:0;if(keyMapCode==KEY_MINUS||keyMapCode==KEY_NUM_MINUS){if(target.value.search("-")!=-1){return false;}target.value="-"+target.value;caretPos++;}else{if(keyMapCode==KEY_NUM_PLUS||keyMapCode==KEY_PLUS){if(target.value.search("-")==0){target.value=target.value.replace(/^-/,"");caretPos--;}}}if(jQuery.fn.setSelection){caretPos=caretPos<0?0:caretPos;jTarget.setSelection(caretPos,caretPos);}}if(keyMapCode==KEY_DOT||keyMapCode==KEY_NUM_DOT||keyMapCode==KEY_COMMA){if(data.numericType[1].toLowerCase()=="i"||data.numericType[0].toLowerCase()=="i"){return false;}if(target.value.search(/[.,]/)==-1){return true;}}if(keyMapCode==KEY_ENTER){return true;}event.stopPropagation();return false;});